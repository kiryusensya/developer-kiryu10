<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>_.k__yu.10 Dev＿E// Support</title>
<link rel="icon" href="https://static.wixstatic.com/media/2f0694_eb4d3063598a4cc5b6bd6b8e31cba915~mv2.png/v1/crop/x_248,y_0,w_1065,h_950/fill/w_816,h_728,al_c,q_90,usm_0.66_1.00_0.01,enc_avif,quality_auto/1767545356653.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://unpkg.com/lucide@latest"></script>

<style>
/* --- 共通変数 --- */
@font-face { font-family: 'HarmonyOS Sans'; src: url('assets/fonts/HarmonyOS_Sans_Regular.woff') format('woff'); font-weight: 400; }
@font-face { font-family: 'HarmonyOS Sans'; src: url('assets/fonts/HarmonyOS_Sans_Bold.woff') format('woff'); font-weight: 700; }
@font-face { font-family: 'HarmonyOS Sans SC'; src: url('assets/fonts/HarmonyOS_SansSC_Medium.woff') format('woff'); font-weight: 400; }
@font-face { font-family: 'HarmonyOS Sans TC'; src: url('assets/fonts/HarmonyOS_SansTC_Medium.woff') format('woff'); font-weight: 400; }

:root {
  --primary: #007DFF;
  --bg-color: #F1F3F5;
  --card-bg: rgba(255, 255, 255, 0.8);
  --modal-text-main: #000000;
  --modal-text-sub: #666666;
  --nav-text: #000;
  --sidebar-text: #000;
  --font-stack: 'HarmonyOS Sans', 'Noto Sans JP', sans-serif;
  --spring-ease: cubic-bezier(0.33, 1, 0.68, 1);
}

:root:lang(ja) { --font-stack: 'HarmonyOS Sans', 'Noto Sans JP', sans-serif; }
:root:lang(en) { --font-stack: 'HarmonyOS Sans', sans-serif; }
:root:lang(zh) { --font-stack: 'HarmonyOS Sans SC', 'Microsoft YaHei', sans-serif; }
:root:lang(zh-TW) { --font-stack: 'HarmonyOS Sans TC', 'Microsoft JhengHei', sans-serif; }
:root:lang(ko) { --font-stack: 'HarmonyOS Sans', 'Noto Sans KR', sans-serif; }
:root:lang(ru) { --font-stack: 'HarmonyOS Sans', sans-serif; }

[data-theme="dark"] {
  --bg-color: #000000;
  --card-bg: #1C1C1E;
  --modal-text-main: #FFFFFF;
  --modal-text-sub: #A0A0A0;
  --nav-text: #fff;
  --sidebar-text: #fff;
}

*, *::before, *::after { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  margin: 0; padding: 0;
  background-color: var(--bg-color);
  color: var(--modal-text-main);
  font-family: var(--font-stack);
  min-height: 100vh;
  /* スクロール可能にするが、基本は収まるように調整 */
  overflow-y: auto; 
  display: flex;
  flex-direction: column;
  transition: background-color 0.5s ease;
  position: relative;
}

#particleCanvas {
  position: fixed; inset: 0; width: 100%; height: 100%;
  z-index: 0; opacity: 0.4; pointer-events: none;
  filter: blur(80px);
}

/* --- ヘッダーレイアウト (Scroll away & Exact Positioning) --- */
/* スクロール時に消えるように position: absolute を使用。
   top:0, left:0 を基準に、index.htmlのpadding値を margin で再現します。
*/
.unified-header {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100px; /* クリック透過のための高さ確保 */
    z-index: 50;
    pointer-events: none; /* 余白部分はクリックを通す */
}

/* ブランドロゴ (index.html: padding: 30px 24px ...) */
.header-brand {
    position: absolute;
    top: 30px;
    left: 24px;
    
    font-size: 20px;
    font-weight: 800;
    display: flex;
    align-items: center;
    gap: 12px;
    color: var(--sidebar-text);
    pointer-events: auto;
}
.header-brand i { color: #FFA500; }

/* ナビゲーション (index.html: padding: 24px 40px ...) */
.header-right {
    position: absolute;
    top: 24px;
    right: 40px;
    
    display: flex;
    align-items: center;
    gap: 20px;
    pointer-events: auto;
}

/* タブスタイル */
.rgl-tabs { display: flex; gap: 30px; }
.rgl-tab {
    position: relative;
    margin: 0 4px !important;
    padding: 0 !important;
    border: none !important;
    background: transparent !important;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    font-weight: 700;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--nav-text);
    opacity: 0.6;
    transition: opacity 0.2s ease;
    z-index: 1;
    cursor: pointer;
}
.rgl-tab:hover, .rgl-tab.active { opacity: 1; }
.rgl-tab::before {
    content: ''; position: absolute; top: 50%; left: 50%;
    width: calc(100% + 37px); height: 38px; border-radius: 50px;
    background: rgba(255, 255, 255, 0.4);
    backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%) scale(0.9);
    opacity: 0; z-index: -1; pointer-events: none;
    transition: all 0.2s cubic-bezier(0.2, 0.8, 0.2, 1);
}
.rgl-tab:hover::before, .rgl-tab.active::before { opacity: 1; transform: translate(-50%, -50%) scale(1); }
[data-theme="dark"] .rgl-tab::before { background: rgba(0, 0, 0, 0.3); border-color: rgba(255, 255, 255, 0.1); }
[data-theme="dark"] .rgl-tab { color: #fff; }

.theme-pill {
    width: 44px; height: 44px; border-radius: 50%;
    background: var(--card-bg); border: 1px solid rgba(128,128,128,0.2);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; transition: transform 0.3s; backdrop-filter: blur(10px);
    color: var(--modal-text-main);
}
.theme-pill:hover { transform: scale(1.1); }
[data-theme="dark"] .theme-pill { color: #fff; }

/* --- メインコンテンツエリア (1画面に収める調整) --- */
.support-wrapper {
    /* ヘッダーの高さ分を確保しつつ、画面中央寄せ */
    min-height: 100vh;
    padding: 100px 40px 40px 40px; /* Top padding ensures content starts below header */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center; /* 垂直方向中央寄せ */
    z-index: 5;
    position: relative;
    width: 100%;
}

.page-title-area {
    text-align: center;
    margin-bottom: 30px; /* 余白を少し詰める */
    animation: fadeInUp 0.6s ease forwards;
    flex-shrink: 0;
}
.page-title {
    font-size: 36px; /* 少し小さくして圧迫感を減らす */
    font-weight: 800; margin: 0 0 8px 0;
    text-shadow: 0 10px 30px rgba(0,0,0,0.1);
}
.page-sub { opacity: 0.6; font-size: 13px; }

/* BENTO GRID LAYOUT (Compact) */
.bento-grid {
    display: grid;
    /* 左側(Web)1.4、右側は1fr 1fr */
    grid-template-columns: 1.4fr 1fr 1fr; 
    /* 高さを画面サイズに合わせて可変に (最小200px, 最大240px程度) */
    grid-template-rows: clamp(180px, 22vh, 240px) clamp(180px, 22vh, 240px);
    gap: 20px;
    width: 100%;
    max-width: 1000px;
    margin: 0 auto;
}

.bento-card {
    background: var(--card-bg);
    border: 1px solid rgba(128,128,128,0.1);
    border-radius: 24px;
    padding: 24px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s var(--spring-ease);
    backdrop-filter: blur(20px);
    position: relative;
    overflow: hidden;
    text-decoration: none;
    color: var(--modal-text-main);
    box-shadow: 0 10px 30px rgba(0,0,0,0.05);
}
.bento-card:hover {
    transform: translateY(-4px) scale(1.01);
    box-shadow: 0 20px 50px rgba(0,0,0,0.2);
    border-color: rgba(128,128,128,0.5);
    z-index: 10;
}
[data-theme="dark"] .bento-card:hover { border-color: #fff; box-shadow: 0 20px 50px rgba(0,0,0,0.6); }

/* 左側の大きなカード (Web/Mail) */
.card-large-left {
    grid-column: 1 / 2;
    grid-row: 1 / 3;
    background: linear-gradient(135deg, rgba(0,125,255,0.1) 0%, var(--card-bg) 100%);
}
.card-large-left .card-icon { font-size: 70px; margin-bottom: 24px; }
.card-large-left .card-title { font-size: 28px; font-weight: 800; text-align: center; }
.card-large-left .card-desc { font-size: 15px; margin-top: 8px; }

/* 右側の小さなカード */
.card-icon { font-size: 40px; margin-bottom: 12px; transition: transform 0.3s; }
.bento-card:hover .card-icon { transform: scale(1.1) rotate(5deg); }
.card-title { font-size: 16px; font-weight: 800; margin-bottom: 2px; }
.card-desc { font-size: 11px; opacity: 0.6; }

/* スマホ対応 */
@media (max-width: 900px) {
    .bento-grid {
        grid-template-columns: 1fr 1fr;
        grid-template-rows: auto;
    }
    .card-large-left {
        grid-column: 1 / 3;
        grid-row: auto;
        height: 180px;
    }
    .card-large-left .card-icon { font-size: 40px; margin-bottom: 10px; }
    .card-large-left .card-title { font-size: 20px; }
    
    .unified-header { position: absolute; height: auto; } /* スマホでも絶対配置 */
    .header-brand { margin-top: 20px; margin-left: 16px; top: 0; left: 0; }
    .header-right { margin-top: 16px; margin-right: 16px; top: 0; right: 0; }
    .support-wrapper { padding: 80px 20px 40px 20px; min-height: auto; }
}
@media (max-width: 600px) {
    .bento-grid { grid-template-columns: 1fr; }
    .card-large-left { grid-column: 1 / 2; }
}

/* 詳細モーダル */
.detail-modal-overlay {
    position: fixed; inset: 0;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(15px);
    z-index: 9999;
    display: flex; justify-content: center; align-items: center;
    opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
}
.detail-modal-overlay.active { opacity: 1; pointer-events: auto; }

.detail-modal {
    background: var(--bg-color);
    width: 800px; max-width: 90%;
    border-radius: 32px;
    border: 1px solid rgba(128,128,128,0.2);
    box-shadow: 0 50px 100px rgba(0,0,0,0.5);
    display: flex;
    overflow: hidden;
    transform: scale(0.95);
    transition: transform 0.4s var(--spring-ease);
}
.detail-modal-overlay.active .detail-modal { transform: scale(1); }
[data-theme="dark"] .detail-modal { background: #1a1a1a; }

.detail-visual {
    flex: 1; background: #000; position: relative; min-height: 350px;
    display: flex; align-items: center; justify-content: center;
}
.detail-visual i { font-size: 100px; color: rgba(255,255,255,0.3); }

.detail-content {
    flex: 1; padding: 40px; display: flex; flex-direction: column; justify-content: center;
}
.detail-title { font-size: 28px; font-weight: 800; margin-bottom: 12px; }
.detail-text { font-size: 14px; opacity: 0.7; line-height: 1.6; margin-bottom: 30px; white-space: pre-wrap; }
.btn-inquiry {
    display: inline-flex; align-items: center; justify-content: center; gap: 10px;
    height: 50px; padding: 0 30px; background: var(--modal-text-main); color: var(--bg-color);
    border-radius: 50px; font-weight: 800; font-size: 15px; cursor: pointer; text-decoration: none;
    transition: transform 0.2s; width: fit-content;
}
.btn-inquiry:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
.close-btn {
    position: absolute; top: 15px; right: 15px; width: 36px; height: 36px; border-radius: 50%;
    background: rgba(128,128,128,0.1); display: flex; align-items: center; justify-content: center;
    cursor: pointer; border: none; color: var(--modal-text-main); font-size: 18px;
}

@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

/* Mobile Warning */
#mobile-warning { display: none; }
@media (max-width: 768px) {
  body > *:not(#mobile-warning) { display: none !important; }
  #mobile-warning {
    display: flex !important; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: #000 !important; z-index: 999999; flex-direction: column; justify-content: center; align-items: center; padding: 20px; overflow: hidden;
  }
  .bloody-text {
    font-family: serif; color: #cc0000; font-size: 14px; font-weight: 800; text-align: center;
    text-shadow: 1px 1px 0px #330000, 0 0 5px #ff0000; animation: pulseBlood 3s infinite alternate; z-index: 10;
  }
  .bloody-text span { display: block; margin-bottom: 5px; }
  @keyframes pulseBlood { 0% { opacity: 0.8; } 100% { opacity: 1; text-shadow: 0 0 10px #ff0000; } }
  .bloody-hand-img {
    position: absolute; opacity: 0.7; pointer-events: none;
    filter: drop-shadow(0 0 15px #ff0000); mix-blend-mode: multiply; max-width: 45%;
  }
  .hand-1 { top: 2%; left: 2%; transform: rotate(-20deg); }
  .hand-2 { bottom: 5%; right: 5%; transform: rotate(30deg); }
}
</style>
<script>
    // アクセス制限
    (function(){
        const isLocal = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
        const referrer = document.referrer;
        if (!referrer.includes('index.html') && !isLocal && referrer !== "") {
           document.write('<div style="position:fixed;inset:0;background:#000;color:#fff;display:flex;justify-content:center;align-items:center;z-index:99999;">Access Denied. Redirecting...</div>');
           setTimeout(() => { window.location.href = 'index.html'; }, 1000);
           window.stop();
        }
    })();
</script>
</head>
<body>

<div id="mobile-warning">
  <div class="bloody-text">
    <span>お使いのデバイスは対応していません</span>
    <span>Your device is not supported</span>
    <span>您的设备不支持</span>
    <span>您的裝置不支援</span>
    <span>귀하의 기기는 지원되지 않습니다</span>
    <span>Ваше устройство не поддерживается</span>
  </div>
  <img src="https://static.wixstatic.com/media/2f0694_eb4d3063598a4cc5b6bd6b8e31cba915~mv2.png/v1/fit/w_500,h_500,q_90/hand_print.png" class="bloody-hand-img hand-1" alt="">
  <img src="https://static.wixstatic.com/media/2f0694_eb4d3063598a4cc5b6bd6b8e31cba915~mv2.png/v1/fit/w_500,h_500,q_90/hand_print.png" class="bloody-hand-img hand-2" alt="">
</div>

<canvas id="particleCanvas"></canvas>

<nav class="unified-header">
    <div class="header-brand">
        <i data-lucide="shield-check"></i>
        <span data-translate="brand_name">kr_開発者 | Support</span>
    </div>

    <div class="header-right">
        <div class="rgl-tabs">
            <a href="index.html" class="rgl-tab" data-translate="tab_home">ACTIVATION</a>
            <a href="#" class="rgl-tab active" data-translate="tab_support">SUPPORT</a>
        </div>
        <div class="theme-pill" id="themeToggle"><i data-lucide="sun" id="themeIcon"></i></div>
        <div class="theme-pill" style="width:40px; height:40px; border:none; cursor:default;"><i data-lucide="user-round" size="20"></i></div>
    </div>
</nav>

<div class="support-wrapper">
    <div class="page-title-area">
        <h1 class="page-title" data-translate="page_title">Support Center</h1>
        <div class="page-sub" data-translate="page_sub">Select a service to connect</div>
    </div>

    <div class="bento-grid">
        <div class="bento-card card-large-left" onclick="openDetail('web')">
            <i data-lucide="mail" class="card-icon" style="color:#007DFF;"></i>
            <div class="card-title" data-translate="card_web_title">Web Page Inquiry</div>
            <div class="card-desc">kiryu10.vercel.app</div>
        </div>

        <div class="bento-card card-small" onclick="openDetail('xbox')">
            <i class="fa-brands fa-xbox card-icon" style="color:#107C10;"></i>
            <div class="card-title">Xbox</div>
            <div class="card-desc">kiryusensya</div>
        </div>

        <div class="bento-card card-small" onclick="openDetail('ps')">
            <i class="fa-brands fa-playstation card-icon" style="color:#0070D1;"></i>
            <div class="card-title">PlayStation</div>
            <div class="card-desc">kiryu_sensya</div>
        </div>

        <div class="bento-card card-small" onclick="openDetail('instagram')">
            <i class="fa-brands fa-instagram card-icon" style="color:#E1306C;"></i>
            <div class="card-title">Instagram</div>
            <div class="card-desc">_.k__yu.10</div>
        </div>

        <div class="bento-card card-small" onclick="openDetail('discord')">
            <i class="fa-brands fa-discord card-icon" style="color:#5865F2;"></i>
            <div class="card-title">Discord</div>
            <div class="card-desc">kiryu_sensya</div>
        </div>
    </div>
</div>

<div class="detail-modal-overlay" id="detailOverlay">
    <div class="detail-modal">
        <button class="close-btn" onclick="closeDetail()"><i data-lucide="x"></i></button>
        <div class="detail-visual" id="modalVisual">
            <i class="fa-brands fa-instagram" id="modalIcon"></i>
        </div>
        <div class="detail-content">
            <div class="detail-title" id="modalTitle">Title</div>
            <div class="detail-text" id="modalDesc">Desc</div>
            <a href="#" target="_blank" class="btn-inquiry" id="modalBtn">
                <span data-translate="btn_inquiry">Contact</span>
                <i data-lucide="arrow-right"></i>
            </a>
        </div>
    </div>
</div>

<script>
    lucide.createIcons();

    // Support Data
    const supportData = {
        web: {
            // Web Page Inquiryのみ翻訳
            titleKey: "card_web_title",
            descKey: "desc_web",
            iconClass: "lucide-mail",
            color: "#007DFF",
            url: "https://kiryu10.vercel.app"
        },
        xbox: {
            title: "Xbox Network", // No Translation
            descKey: "desc_xbox",
            iconClass: "fa-brands fa-xbox",
            color: "#107C10",
            url: "https://www.xbox.com/ja-JP/play/user/kiryusensya"
        },
        ps: {
            title: "PlayStation Network", // No Translation
            descKey: "desc_ps",
            iconClass: "fa-brands fa-playstation",
            color: "#0070D1",
            url: "#"
        },
        instagram: {
            title: "Instagram", // No Translation
            descKey: "desc_insta",
            iconClass: "fa-brands fa-instagram",
            color: "#E1306C",
            url: "https://www.instagram.com/_.k__yu.10"
        },
        discord: {
            title: "Discord", // No Translation
            descKey: "desc_discord",
            iconClass: "fa-brands fa-discord",
            color: "#5865F2",
            url: "https://discord.gg/rVAJp56V"
        }
    };

    // Translations (Web Page Inquiry Title ONLY translated for card title)
    const TRANSLATIONS = {
        ja: { 
            brand_name: "kr_開発者版 | Support", tab_home: "ホーム", tab_news: "ニュース", tab_support: "サポート",
            page_title: "サポートセンター", page_sub: "接続するサービスを選択してください", 
            card_web_title: "Webページのお問い合わせ", btn_inquiry: "問い合わせる",
            desc_web: "公式サイトに関するお問い合わせはこちらから。\n kiryu10.vercel.app",
            desc_xbox: "Xbox Live経由で接続します。\nゲーマータグ: kiryusensya",
            desc_ps: "PlayStation Network経由で接続します。\nオンラインID: kiryu_sensya",
            desc_insta: "最新情報の確認やDMはこちらから。\nID: _.k__yu.10",
            desc_discord: "リアルタイムサポートチャット。\nID: kiryu_sensya"
        },
        en: { 
            brand_name: "kr_Dev E | Support", tab_home: "HOME", tab_news: "NEWS", tab_support: "SUPPORT",
            page_title: "Support Center", page_sub: "Select a service to connect", 
            card_web_title: "Web Page Inquiry", btn_inquiry: "Contact Support",
            desc_web: "Contact us regarding the official website.\n kiryu10.vercel.app",
            desc_xbox: "Connect via Xbox Live.\nGamertag: kiryusensya",
            desc_ps: "Connect via PlayStation Network.\nOnline ID: kiryu_sensya",
            desc_insta: "Follow for updates and DMs.\nID: _.k__yu.10",
            desc_discord: "Real-time support chat.\nID: kiryu_sensya"
        },
        zh: { 
            brand_name: "kr_开发者版 | Support", tab_home: "首页", tab_news: "新闻", tab_support: "支持",
            page_title: "服务中心", page_sub: "选择要连接的服务", 
            card_web_title: "网页咨询", btn_inquiry: "联系我们",
            desc_web: "关于官方网站的咨询请点击此处。\n kiryu10.vercel.app",
            desc_xbox: "通过 Xbox Live 连接。\n玩家代号: kiryusensya",
            desc_ps: "通过 PlayStation Network 连接。\n在线ID: kiryu_sensya",
            desc_insta: "关注最新动态及私信。\nID: _.k__yu.10",
            desc_discord: "实时支持聊天。\nID: kiryu_sensya"
        },
        "zh-TW": { 
            brand_name: "kr_開發者版 | Support", tab_home: "首頁", tab_news: "新聞", tab_support: "支援",
            page_title: "服務中心", page_sub: "選擇要連接的服務", 
            card_web_title: "網頁諮詢", btn_inquiry: "聯絡我們",
            desc_web: "關於官方網站的諮詢請點擊此處。\n kiryu10.vercel.app",
            desc_xbox: "透過 Xbox Live 連接。\n玩家代號: kiryusensya",
            desc_ps: "透過 PlayStation Network 連接。\n線上ID: kiryu_sensya",
            desc_insta: "追蹤最新動態及私訊。\nID: _.k__yu.10",
            desc_discord: "即時支援聊天。\nID: kiryu_sensya"
        },
        ko: { 
            brand_name: "kr_개발자용 | Support", tab_home: "홈", tab_news: "뉴스", tab_support: "지원",
            page_title: "서비스 센터", page_sub: "연결할 서비스를 선택하세요", 
            card_web_title: "웹 페이지 문의", btn_inquiry: "문의하기",
            desc_web: "공식 웹사이트 관련 문의는 여기로.\n kiryu10.vercel.app",
            desc_xbox: "Xbox Live를 통해 연결합니다.\n게이머태그: kiryusensya",
            desc_ps: "PlayStation Network를 통해 연결합니다.\n온라인 ID: kiryu_sensya",
            desc_insta: "최신 정보 확인 및 DM은 여기로.\nID: _.k__yu.10",
            desc_discord: "실시간 지원 채팅.\nID: kiryu_sensya"
        },
        ru: { 
            brand_name: "kr_Разработчик | Support", tab_home: "Главная", tab_news: "Новости", tab_support: "Поддержка",
            page_title: "Центр поддержки", page_sub: "Выберите сервис", 
            card_web_title: "Запрос по сайту", btn_inquiry: "Связаться",
            desc_web: "Свяжитесь с нами через официальный сайт.\n kiryu10.vercel.app",
            desc_xbox: "Подключение через Xbox Live.\nТег игрока: kiryusensya",
            desc_ps: "Подключение через PlayStation Network.\nOnline ID: kiryu_sensya",
            desc_insta: "Следите за обновлениями и пишите в DM.\nID: _.k__yu.10",
            desc_discord: "Чат поддержки в реальном времени.\nID: kiryu_sensya"
        }
    };

    // 言語設定
    function setLanguage() {
        const lang = localStorage.getItem('user_lang') || 'ja';
        const t = TRANSLATIONS[lang] || TRANSLATIONS.ja;
        document.documentElement.lang = lang;
        
        document.querySelectorAll('[data-translate]').forEach(el => {
            const key = el.getAttribute('data-translate');
            if(t[key]) el.textContent = t[key];
        });
        return t;
    }

    // モーダル
    const overlay = document.getElementById('detailOverlay');
    const mTitle = document.getElementById('modalTitle');
    const mDesc = document.getElementById('modalDesc');
    const mBtn = document.getElementById('modalBtn');
    const mVisual = document.getElementById('modalVisual');

    function openDetail(key) {
        const data = supportData[key];
        const t = setLanguage();
        if(!data) return;

        // Title: Use translated key if exists, else raw title
        mTitle.textContent = data.titleKey ? (t[data.titleKey] || data.title) : data.title;
        mDesc.innerText = t[data.descKey] || data.descKey;
        mBtn.href = data.url;
        
        mVisual.innerHTML = '';
        const iconEl = document.createElement('i');
        if(data.iconClass.includes('lucide')) {
            iconEl.setAttribute('data-lucide', data.iconClass.replace('lucide-', ''));
        } else {
            iconEl.className = data.iconClass;
        }
        iconEl.style.fontSize = "100px";
        iconEl.style.color = "rgba(255,255,255,0.8)";
        mVisual.appendChild(iconEl);
        mVisual.style.background = `linear-gradient(135deg, ${data.color} 0%, #000000 100%)`;

        overlay.classList.add('active');
        lucide.createIcons();
    }

    function closeDetail() { overlay.classList.remove('active'); }
    overlay.addEventListener('click', (e) => { if(e.target === overlay) closeDetail(); });

    // テーマ設定
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const htmlEl = document.documentElement;

    function initTheme() {
        const saved = localStorage.getItem('user_theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        applyTheme(saved);
    }
    function applyTheme(theme) {
        htmlEl.setAttribute('data-theme', theme);
        themeIcon.setAttribute('data-lucide', theme === 'light' ? 'sun' : 'moon');
        lucide.createIcons();
        initParticles(theme);
    }
    themeToggle.addEventListener('click', () => {
        const current = htmlEl.getAttribute('data-theme');
        const next = current === 'dark' ? 'light' : 'dark';
        applyTheme(next);
        localStorage.setItem('user_theme', next);
    });

    // パーティクル背景
    const canvas = document.getElementById('particleCanvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    let particleHue = 210;
    function initParticles(theme) {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        particleHue = theme === 'light' ? 210 : 220;
        particles = [];
        for(let i=0; i<8; i++) particles.push(new Particle());
    }
    class Particle {
        constructor() { 
            this.x = Math.random() * canvas.width; 
            this.y = Math.random() * canvas.height; 
            this.size = Math.random() * 150 + 50; 
            this.speedX = Math.random() * 0.2 - 0.1; 
            this.speedY = Math.random() * 0.2 - 0.1; 
            this.opacity = Math.random() * 0.3 + 0.1; 
        }
        update() { 
            this.x += this.speedX; this.y += this.speedY; 
            if(this.x < 0 || this.x > canvas.width) this.speedX *= -1; 
            if(this.y < 0 || this.y > canvas.height) this.speedY *= -1; 
        }
        draw() { 
            ctx.fillStyle = `hsla(${particleHue}, 100%, 50%, ${this.opacity * 0.2})`; 
            ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill(); 
        }
    }
    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animate);
    }
    window.addEventListener('resize', () => { initParticles(htmlEl.getAttribute('data-theme')); });

    // 初期化
    initTheme();
    animate();
    setLanguage();
</script>
</body>
</html>
